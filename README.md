# My Cool DataBase

## Дополнительный функционал

При создании таблицы можно указать для полей дополнительные параметры (идентичны тем, что используются в обычном SQL):
- *AUTO_INCREMENT* - автоматически инкриминирует значение;
- *NOT NULL* - не позволяет полю иметь нулевое (пустое) значение
- *DEFAULT(value)* - устанавливает значение по умолчанию для поля

## Принцип работы

### Метод Request(query)

Метод *Request(query)* используется для запросов, не требующих ответа, такие как *CREATE TABLE, INSERT, UPDATE* и т.п.

Примечание: правильность исполнения можно проверить, отловив исключения. Нет исключения - запрос успешно выполнен. Вылезло исключение - ошибка запроса.

```cpp
MyCoolDB db;
...
db.Request("INSERT INTO Customers(id, name) VALUES (1, 'Michael Scott')");
db.Request("UPDATE Customers SET age = NULL WHERE id = 3");
```

### Метод RequestQuery(query)

Метод *RequestQuery(query)* используется для запросов, требующих ответа, то есть для *Select*.
В ответ возвращается структура *ResultSet*

```cpp
MyCoolDB db;
ResultSet resSet = db.RequestQuery("SELECT * FROM Customers");
```


### Структура ResultSet

Структура *ResultSet* имеет следующие методы:
- *Count()* - количество полученных записей;
- *Next()* - переключает итератор на следующую запись. Возвращает true, если переключение выполнено, иначе false;
- *Reset()* - сбрасывает итератор;
- *Get<type>(column_name)* - возвращает структуру-значение Element<type> из колонки column_name на текущем итераторе. Структура имеет 2 метода: 
  1) *Value()* - возвращает значение; 
  2) *IsNull()* - возвращает true, если нулевое (пустое) значение, иначе false.

Примечание: первое использование *Next()* переводит итератор на первую запись, но при этом если сразу без него воспользоваться метода *Get*, то итератор предварительно сам переключится на первую запись. Это нужно для того, чтоб можно было удобно получить все записи через цикл while, но если нам нужно получить только из первой (возможно единственной) записи данные, то можно не использовать лишний *Next()*.
```cpp
MyCoolDB db;
...
ResultSet resSet = db.RequestQuery("SELECT name FROM Customers");
// выводиться значение name для всех записей
while (res.Next()) {
    std::cout << res.Get<std::string>("name") << std::endl;
}
...
ResultSet resSet = db.RequestQuery("SELECT product FROM Orders WHERE id = 5");
// id - уникальное значение, поэтому сразу выводим значение product для единственной записи
std::cout << res.Get<std::string>("product") << std::endl;
```

Примечание: при использовании *SELECT JOIN*, для получения значение надо указать не только имя колонки, но и имя таблицы. То есть: table.column
```cpp
MyCoolDB db;
...
ResultSet resSet = db.RequestQuery("SELECT * FROM Customers INNER JOIN Orders "
                                   "ON Orders.customer_id = Customers.id");
while (resSet.Next()) {
    std::cout << resSet.Get<int>("Orders.id").Value() << ' '
              << resSet.Get<int>("Customers.id").Value() << std::endl;
}
```


# Лабораторная работа 12

Реляционная база данных в памяти с поддержкой упрощенных sql запросов.

## Задача

Реализовать упрощенную реляционную БД с поддержкой "урезанного" sql. Лабораторная работа должна быть выполнена в виде библиотеки, которая обязана содержать класс MyCoolDB (название может быть любым), которые обладает публичным методом для выполнения запроса, а также возможностью сохранения и загрузки текущего состояния БД в файл

### Поддерживаемый синтаксис

Ключевые слова:

- SELECT
- FROM
- WHERE
- (LEFT|RIGHT|INNER)JOIN
- CREATE TABLE
- DROP TABLE
- AND
- OR
- IS
- NOT
- NULL
- ON
- UPDATE
- INSERT
- VALUES
- DELETE
- PRIMARY KEY
- FOREIGN KEY

Поддерживаемые типы данных:

- bool
- int
- float
- double
- varchar

Ограничения:

- вложенные подзапросы не поддерживаются
- Join только для 2 таблиц

## Реализация

Работа выполняется в виде библиотеки. Для хранение данных используется только память. Тесты являются частью задания.
Результат выполнения любого запроса должен иметь возможность отображения в стандартном потоке вывода

Данная ЛР является последней и покрывает весь курс. Подумайте где и какие части пройденного материала применимы

Использование внешних библиотек запрещено.

## NB
Если Вы в первый раз слышите про то что такое реляционные БД и sql, то данный список материалов поможет понять основные концепции, достаточные для выполнения ЛР:

- [Видеокурс. Для ЛР достаточно первой половины](https://www.youtube.com/watch?v=HXV3zeQKqGY)
- [Хабр](https://habr.com/ru/articles/480838)
- [Для эксперементов в запросами](http://sqlfiddle.com/)

## Deadline

**15 баллов**

1. 22.05.23 0.85
2. 29.05.23 0.65
3. 05.06.23. 0.5